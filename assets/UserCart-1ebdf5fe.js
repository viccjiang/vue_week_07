import{c as m}from"./UserCartStore-e93f3882.js";import{_ as k,m as y,a as x,r as g,o as a,b as d,e as C,d as t,f as l,h as c,F as i,E as v,t as r,w as b,I,g as u,G as P,H as U,p as A,i as S}from"./index-764b8113.js";import{U as V}from"./UserCartStepComponent-7b17eab6.js";const{VITE_APP_URL:$,VITE_APP_PATH:w}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"jiangs2023",BASE_URL:"/vue_week_07/",MODE:"production",DEV:!1,PROD:!0},D={data(){return{products:[]}},components:{UserCartStepComponent:V},methods:{getProducts(){this.$http.get(`${$}api/${w}/products/all`).then(e=>{console.log("產品列表:",e.data.products),this.products=e.data.products})},getProduct(e){this.$router.push(`/product/${e}`)},...y(m,["addToCart","getCarts","updateCartItem","deleteItem","deleteAllItem","createOrder","getOrders"])},computed:{...x(m,["cartData","cartsLength"])},mounted(){this.getProducts(),this.getCarts()}},n=e=>(A("data-v-c2e465b2"),e=e(),S(),e),E={key:0,class:"container"},L={class:"text-start"},T=n(()=>t("i",{class:"bi bi-trash3 text-danger me-2"},null,-1)),B={class:"table align-middle"},N=n(()=>t("thead",null,[t("tr",null,[t("th"),t("th",null,"品名"),t("th",{style:{width:"100px"}},"數量/單位"),t("th",{class:"text-end"},"單價"),t("th")])],-1)),O=["onClick"],R=["src"],j=["onClick"],H={class:"input-group input-group-sm"},M=["onUpdate:modelValue","onChange"],q=["value"],F={class:"text-end"},G={class:"text-end"},z=["onClick"],J=n(()=>t("i",{class:"bi bi-trash3 text-danger"},null,-1)),K=[J],Q=n(()=>t("td",{colspan:"3",class:"text-end"},"總計",-1)),W={class:"text-end"},X=n(()=>t("td",null,null,-1)),Y=n(()=>t("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1)),Z={class:"text-end text-success"},tt=n(()=>t("td",null,null,-1)),et={class:"container"},st={class:"row"},ot={class:"d-flex justify-content-between"};function at(e,_,nt,dt,rt,p){const f=g("UserCartStepComponent"),h=g("router-link");return a(),d(i,null,[C(f),e.cartsLength>0?(a(),d("div",E,[t("div",L,[e.cartsLength>0?(a(),d("a",{key:0,class:"border-bottom border-danger text-danger",type:"button",onClick:_[0]||(_[0]=(...s)=>e.deleteAllItem&&e.deleteAllItem(...s))},[T,l("清空所有商品")])):c("",!0)]),t("table",B,[N,t("tbody",null,[e.cartData.carts?(a(!0),d(i,{key:0},v(e.cartData.carts,s=>(a(),d("tr",{key:s.id},[t("td",null,[t("a",{href:"#",onClick:u(o=>p.getProduct(s.product.id),["prevent"])},[t("img",{src:s.product.imageUrl,alt:"",class:"object-fit d-none d-md-block rounded-4",style:{width:"100px",height:"100px"}},null,8,R)],8,O)]),t("td",null,[t("a",{href:"#",class:"text-dark",onClick:u(o=>p.getProduct(s.product.id),["prevent"])},r(s.product.title),9,j)]),t("td",null,[t("div",H,[P(t("select",{name:"",id:"",class:"form-select","onUpdate:modelValue":o=>s.qty=o,onChange:o=>e.updateCartItem(s)},[(a(),d(i,null,v(20,o=>t("option",{value:o,key:o+"1234578"},r(o),9,q)),64))],40,M),[[U,s.qty]])]),t("p",null,r(s.product.unit),1)]),t("td",F,r(s.total),1),t("td",G,[t("a",{href:"",onClick:u(o=>e.deleteItem(s.id),["prevent"])},K,8,z)])]))),128)):c("",!0)]),t("tfoot",null,[t("tr",null,[Q,t("td",W,r(e.cartData.total),1),X]),t("tr",null,[Y,t("td",Z,r(e.cartData.final_total),1),tt])])])])):c("",!0),t("div",et,[t("div",st,[t("div",ot,[C(h,{to:"/products",class:"btn btn-outline-primary px-5"},{default:b(()=>[l("繼續選購")]),_:1}),e.cartsLength>0?(a(),I(h,{key:0,to:"/checkout",class:"btn btn-danger px-5"},{default:b(()=>[l("下一步 ")]),_:1})):c("",!0)])])])],64)}const ut=k(D,[["render",at],["__scopeId","data-v-c2e465b2"]]);export{ut as default};
