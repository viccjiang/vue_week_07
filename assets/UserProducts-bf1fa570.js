import{c as u}from"./UserCartStore-e93f3882.js";import{_ as C,m as w,a as k,r as h,o as a,b as c,d as t,g as _,f as r,F as p,E as f,e as b,j as E,t as n,w as j,h as T,p as I,i as B}from"./index-764b8113.js";import{P as A}from"./PaginationComponent-222f9f58.js";const{VITE_APP_URL:v,VITE_APP_PATH:x}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"jiangs2023",BASE_URL:"/vue_week_07/",MODE:"production",DEV:!1,PROD:!0},S={components:{PaginationComponent:A},data(){return{products:[],product:{},pagination:{},status:{loadingItem:""},categories:[],selectCategory:""}},methods:{getProducts(s=1){this.$http.get(`${v}api/${x}/products?page=${s}`).then(o=>{window.scrollTo(0,0);const{products:i,pagination:g}=o.data;this.products=i,this.pagination=g,console.log(this.products,this.pagination)})},getAllProducts(){const s=`${v}api/${x}/products/all`;this.$http.get(s).then(o=>{if(!o.data.success)return;this.products=o.data.products,this.getCategories();const{selectCategory:i}=this.$route.params;i&&(this.selectCategory=i),this.selectCategory!==""&&(this.pagination={})})},getCategories(){const s=new Set;this.products.forEach(o=>{s.add(o.category)}),this.categories=[...s]},...w(u,["getCarts","addToCart"])},watch:{selectCategory(s,o){(s===""||o==="")&&this.getProducts()}},computed:{...k(u,["cartData","cartsLength"]),filterProducts(){return this.products.filter(s=>s.category.match(this.selectCategory))}},mounted(){this.getProducts(),this.getAllProducts()}},l=s=>(I("data-v-ca07a89f"),s=s(),B(),s),N=E('<div class="container-fluid g-0" data-v-ca07a89f><div class="card border-0 rounded-0 bg-dark text-white mb-5" data-v-ca07a89f><div class="filters" style="height:200px;background-image:url(https://storage.googleapis.com/vue-course-api.appspot.com/jiangs2023/1677550181847.jpg?GoogleAccessId=firebase-adminsdk-zzty7%40vue-course-api.iam.gserviceaccount.com&amp;Expires=1742169600&amp;Signature=qQpOKJlmAipjojZQ7imN6J6MiWWuxRYaXwXr6MdPijbdIRTjWFssPopTl5JN%2FjlUul1ccEWNcVdj2qhABmca1qXPqK9FnT1jz92lk4l7rOonpF8%2F7lVw8i%2BDI3KhGnoYIBBfmyQyRsPKI%2B8mHHakw9uegGVuY%2BXfxGLcBuYGsxhNU9UTy1fj4%2Fc07ANvqKpCrE66j9O2KJE%2B5VlGoCK8pKmBlmMjyLUXNSmESrPdR9696BuSHjvmYXdBWtAC6ODZLqXHs7P7vskYx3e23oggxpMBveQQCm8u3tqgCu6kjOE7EYtYucOEmah6Nsbuw6pUMfIhrj5xbebroqyayFKz8g%3D%3D);background-size:cover;background-position:center center;background-attachment:fixed;" data-v-ca07a89f></div><div class="card-img-overlay d-flex flex-column justify-content-center align-item-center" data-v-ca07a89f><h1 class="fs-3 card-title text-center fw-bold" data-v-ca07a89f><p class="fs-m fw-bold mb-2" data-v-ca07a89f>所有甜點</p><p class="logoText fs-sm p-0 m-0" data-v-ca07a89f>SOME SWEET <span class="fs-xs fw-lighter" data-v-ca07a89f>/am</span></p></h1></div></div></div>',1),V={class:"container mt-md-5 mt-3 mb-7"},O={class:"row"},$={class:"col-md-3"},U={class:"accordion border border-bottom border-top-0 border-start-0 border-end-0 mb-3",id:"accordionExample"},D={class:"card border-0"},F=l(()=>t("div",{class:"card-header px-0 py-4 bg-white border border-bottom-0 border-top border-start-0 border-end-0 rounded-0",id:"headingOne","data-bs-toggle":"collapse","data-bs-target":"#collapseOne"},[t("div",{class:"d-flex justify-content-between align-items-center pe-1"},[t("h4",{class:"mb-0"}," 產品類別 "),t("i",{class:"bi bi-chevron-down"})])],-1)),K={id:"collapseOne",class:"collapse show","aria-labelledby":"headingOne","data-bs-parent":"#accordionExample"},q={class:"card-body py-0"},L=l(()=>t("i",{class:"bi bi-arrow-right-circle"},null,-1)),M=["onClick"],R=l(()=>t("i",{class:"bi bi-arrow-right-circle"},null,-1)),Y={class:"col-md-9"},X={class:"row row-cols-1 row-cols-sm-2 row-cols-lg-3 g-4"},G={class:"product card h-100 p-5 rounded-4 products-img"},H=["src","alt"],W={class:"card-body d-flex flex-column"},z={class:"fs-6 fw-bold card-title mb-6"},Q={class:"d-flex mt-auto"},J={class:"text-muted fs-xs me-auto"},Z={class:"card-text mb-0"},tt=l(()=>t("span",{class:"fs-xs d-flex align-items-end ms-1"},"NTD",-1)),st={class:"text-center border-0"},et=["disabled","onClick"],ot={key:0,class:"spinner-border text-light spinner-border-sm",role:"status"};function at(s,o,i,g,d,m){const y=h("router-link"),P=h("PaginationComponent");return a(),c(p,null,[N,t("div",V,[t("div",O,[t("div",$,[t("div",U,[t("div",D,[F,t("div",K,[t("div",q,[t("a",{href:"#",class:"list-group-item list-group-item-action rounded-0 p-3",onClick:o[0]||(o[0]=_(e=>{d.selectCategory="",this.$route.params.selectCategory=""},["prevent"]))},[L,r(" 全部")]),(a(!0),c(p,null,f(d.categories,e=>(a(),c("a",{href:"#",key:e,class:"list-group-item list-group-item-action rounded-0 p-3",onClick:_(ct=>d.selectCategory=e,["prevent"])},[R,r(" "+n(e),1)],8,M))),128))])])])])]),t("div",Y,[t("div",X,[(a(!0),c(p,null,f(m.filterProducts,e=>(a(),c("div",{class:"col-md-4",key:e.id},[t("div",G,[t("img",{src:e.imageUrl,class:"card-img-top object-fit rounded-4",alt:e.title},null,8,H),t("div",W,[t("h5",z,n(e.title),1),t("div",Q,[t("span",J,[t("del",null,"NT$"+n(e.origin_price),1)]),t("p",Z,"$"+n(e.price),1),r(),tt]),t("small",st,[b(y,{class:"text-dark d-block",to:`/product/${e.id}`},{default:j(()=>[r("查 看 細 節")]),_:2},1032,["to"])])]),t("button",{type:"buttom",class:"btn btn-primary mt-5",disabled:this.status.loadingItem===e.id,onClick:()=>s.addToCart(e.id)},[this.status.loadingItem===e.id?(a(),c("div",ot)):T("",!0),r(" 加入購物車 ")],8,et)])]))),128))]),b(P,{class:"mt-5 mb-5 float-end",pages:d.pagination,onEmitPages:m.getProducts},null,8,["pages","onEmitPages"])])])])],64)}const nt=C(S,[["render",at],["__scopeId","data-v-ca07a89f"]]);export{nt as default};
